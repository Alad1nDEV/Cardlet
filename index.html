<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Obr√°zkov√© flash-karty</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');

:root {
  --primary: #6a82fb;
  --secondary: #fc5c7d;
  --success: #43e97b;
  --danger:  #fc5c7d;
  --glass-bg: rgba(255,255,255,0.25);
  --glass-border: rgba(255,255,255,0.45);
  --shadow: 0 8px 32px 0 rgba(31,38,135,0.37);
}

body {
  font-family: 'Poppins', Arial, sans-serif;
  background: linear-gradient(135deg, #fc5c7d 0%, #6a82fb 100%);
  min-height: 100vh;
  margin: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 40px 12px;
  gap: 28px;
}

h1 {
  font-size: 2.4rem;
  margin: 0 0 12px 0;
  color: #fff;
  letter-spacing: 2px;
  text-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

#stats {
  font-size: 1.1rem;
  color: #fff;
  background: rgba(0,0,0,0.12);
  padding: 6px 18px;
  border-radius: 18px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

#card {
  width: 340px;
  height: 440px;
  perspective: 1200px;
  display: none;
  margin: 0 auto;
}

.card-inner {
  width: 100%;
  height: 100%;
  position: relative;
  transition: transform 0.7s cubic-bezier(.4,2,.6,1);
  transform-style: preserve-3d;
  cursor: pointer;
}

.flipped {
  transform: rotateY(180deg);
}

.card-side {
  position: absolute;
  inset: 0;
  border-radius: 24px;
  box-shadow: var(--shadow);
  backface-visibility: hidden;
  background: var(--glass-bg);
  border: 1.5px solid var(--glass-border);
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 32px;
  box-sizing: border-box;
  backdrop-filter: blur(12px) saturate(120%);
  transition: box-shadow .3s, border .3s;
}

.card-side img {
  max-width: 100%;
  max-height: 100%;
  border-radius: 14px;
  object-fit: contain;
  box-shadow: 0 2px 12px rgba(80,80,80,0.10);
  background: #fff;
}

.card-back {
  transform: rotateY(180deg);
  font-size: 1.35em;
  text-align: center;
  color: #222;
  padding: 20px;
  word-break: break-word;
  font-weight: 700;
  letter-spacing: 1px;
}

#controls {
  display: none;
  gap: 22px;
  margin-top: 18px;
  flex-wrap: wrap;
  justify-content: center;
}

button {
  font-size: 2.1rem;
  padding: 12px 26px;
  border: none;
  border-radius: 14px;
  cursor: pointer;
  color: #fff;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  box-shadow: 0 2px 12px rgba(0,0,0,0.13);
  transition: background .18s, transform .13s, box-shadow .18s;
  outline: none;
  display: flex;
  align-items: center;
  justify-content: center;
}

button:active {
  transform: scale(0.92);
  box-shadow: 0 1px 4px rgba(0,0,0,0.10);
}

.btn-wrong { background: linear-gradient(135deg, var(--danger), #fcb045);}
.btn-right { background: linear-gradient(135deg, var(--success), #38f9d7);}
.btn-alt   { background: linear-gradient(135deg, #f7971e, #ffd200);}
.btn-prev  { background: #616161; font-size: 1.1rem; padding: 8px 18px;}

.btn-small { font-size: 1.1rem; padding: 7px 20px; background: #fff; color: #333; border: 1px solid #eee;}
.btn-small:active { background: #eee; }

button:hover:not(.btn-small) {
  filter: brightness(1.1) drop-shadow(0 2px 8px #fff4);
}

input[type="file"] {
  font-size: 1.1rem;
  padding: 6px;
  border-radius: 8px;
  border: none;
  background: rgba(255,255,255,0.7);
  margin-right: 10px;
}

@media (max-width: 430px) {
  #card { width: 98vw; height: 60vw; min-height: 220px; }
  .card-inner, .card-side { padding: 10px;}
}
  </style>
</head>
<body>

  <h1>Obr√°zkov√© flash-karty</h1>

  <div>
    <input type="file" id="file" accept=".csv">
    <button id="btnReset" class="btn-small">Reset</button>
  </div>
  <div id="stats"></div>

  <div id="card">
    <div class="card-inner" id="cardInner">
      <div class="card-side card-front">
        <img id="pic" alt="Obr√°zek">
      </div>
      <div class="card-side card-back" id="title"></div>
    </div>
  </div>

  <div id="controls">
    <button class="btn-wrong" id="btnWrong" title="Nevƒõdƒõl/a jsem">‚úñ</button>
    <button class="btn-alt"   id="btnAlt"   title="Jin√Ω obr√°zek">üîÑ</button>
    <button class="btn-right" id="btnRight" title="Vƒõdƒõl/a jsem">‚úî</button>
    <button class="btn-prev btn-small" id="btnPrev" title="P≈ôedchoz√≠ karta">‚Üê P≈ôedchoz√≠</button>
  </div>

  <script>
    // --- V√Ωchoz√≠ data pro uk√°zku ---
    const DEFAULT_CSV = `kr√°snooƒçko,Euglena,https://commons.wikimedia.org/wiki/Special:FilePath/Euglena.jpg
trepka,Paramecium,https://commons.wikimedia.org/wiki/Special:FilePath/Paramecium.jpg
nezmar hnƒõd√Ω,Hydra oligactis,https://commons.wikimedia.org/wiki/Special:FilePath/Hydra_oligactis.jpg
tal√≠≈ôovka u≈°at√°,Aurelia aurita,https://commons.wikimedia.org/wiki/Special:FilePath/Aurelia_aurita.jpg
kor√°l ƒçerven√Ω,Corallium rubrum,https://commons.wikimedia.org/wiki/Special:FilePath/Corallium_rubrum.jpg
sasanka ko≈àsk√°,Actinia equina,https://commons.wikimedia.org/wiki/Special:FilePath/Actinia_equina.jpg
plo≈°tƒõnka ml√©ƒçn√°,Dugesia lactea,https://commons.wikimedia.org/wiki/Special:FilePath/Dugesia_lactea.jpg
motolice jatern√≠,Fasciola hepatica,https://commons.wikimedia.org/wiki/Special:FilePath/Fasciola_hepatica.jpg
tasemnice bezbrann√°,Taenia saginata,https://commons.wikimedia.org/wiki/Special:FilePath/Taenia_saginata.jpg
≈°krkavka dƒõtsk√°,Ascaris lumbricoides,https://commons.wikimedia.org/wiki/Special:FilePath/Ascaris_lumbricoides.jpg
roup dƒõtsk√Ω,Enterobius vermicularis,https://commons.wikimedia.org/wiki/Special:FilePath/Enterobius_vermicularis.jpg
hlem√Ω≈æƒè zahradn√≠,Helix pomatia,https://commons.wikimedia.org/wiki/Special:FilePath/Helix_pomatia.jpg
plovatka bahenn√≠,Lymnaea stagnalis,https://commons.wikimedia.org/wiki/Special:FilePath/Lymnaea_stagnalis.jpg
≈°keble rybniƒçn√°,Anodonta cygnea,https://commons.wikimedia.org/wiki/Special:FilePath/Anodonta_cygnea.jpg
velevrub mal√≠≈ôsk√Ω,Unio pictorum,https://commons.wikimedia.org/wiki/Special:FilePath/Unio_pictorum.jpg
s√©pie obecn√°,Sepia officinalis,https://commons.wikimedia.org/wiki/Special:FilePath/Sepia_officinalis.jpg
≈æ√≠≈æala obecn√°,Lumbricus terrestris,https://commons.wikimedia.org/wiki/Special:FilePath/Lumbricus_terrestris.jpg
pijavka ko≈àsk√°,Haemopis sanguisuga,https://commons.wikimedia.org/wiki/Special:FilePath/Haemopis_sanguisuga.jpg
≈°t√≠r k√Ωlnat√Ω,Euscorpius carpathicus,https://commons.wikimedia.org/wiki/Special:FilePath/Euscorpius_carpathicus.jpg
k≈ôi≈æ√°k obecn√Ω,Araneus diadematus,https://commons.wikimedia.org/wiki/Special:FilePath/Araneus_diadematus.jpg
vodouch st≈ô√≠b≈ôit√Ω,Argyroneta aquatica,https://commons.wikimedia.org/wiki/Special:FilePath/Argyroneta_aquatica.jpg
sek√°ƒç dom√°c√≠,Phalangium opilio,https://commons.wikimedia.org/wiki/Special:FilePath/Phalangium_opilio.jpg
kl√≠≈°tƒõ obecn√©,Ixodes ricinus,https://commons.wikimedia.org/wiki/Special:FilePath/Ixodes_ricinus.jpg
hrotnatka pr≈Øhledn√°,Daphnia pulex,https://commons.wikimedia.org/wiki/Special:FilePath/Daphnia_pulex.jpg
buchanka obecn√°,Cyclops strenuus,https://commons.wikimedia.org/wiki/Special:FilePath/Cyclops_strenuus.jpg
rak ≈ô√≠ƒçn√≠,Astacus astacus,https://commons.wikimedia.org/wiki/Special:FilePath/Astacus_astacus.jpg
langusta obecn√°,Palinurus vulgaris,https://commons.wikimedia.org/wiki/Special:FilePath/Palinurus_vulgaris.jpg
mnohono≈æka zemn√≠,Julus terrestris,https://commons.wikimedia.org/wiki/Special:FilePath/Julus_terrestris.jpg
stono≈æka ≈°kvorov√°,Lithobius forficatus,https://commons.wikimedia.org/wiki/Special:FilePath/Lithobius_forficatus.jpg
≈°kvor obecn√Ω,Forficula auricularia,https://commons.wikimedia.org/wiki/Special:FilePath/Forficula_auricularia.jpg
≈°v√°b obecn√Ω,Blatta orientalis,https://commons.wikimedia.org/wiki/Special:FilePath/Blatta_orientalis.jpg
cvrƒçek poln√≠,Gryllus campestris,https://commons.wikimedia.org/wiki/Special:FilePath/Gryllus_campestris.jpg
krtono≈æka obecn√°,Gryllotalpa gryllotalpa,https://commons.wikimedia.org/wiki/Special:FilePath/Gryllotalpa_gryllotalpa.jpg
saranƒçe modrok≈ô√≠dl√°,Oedipoda caerulescens,https://commons.wikimedia.org/wiki/Special:FilePath/Oedipoda_caerulescens.jpg
rumƒõnice pospoln√°,Pyrrhocoris apterus,https://commons.wikimedia.org/wiki/Special:FilePath/Pyrrhocoris_apterus.jpg
roh√°ƒç obecn√Ω,Lucanus cervus,https://commons.wikimedia.org/wiki/Special:FilePath/Lucanus_cervus.jpg
chroust obecn√Ω,Melolontha melolontha,https://commons.wikimedia.org/wiki/Special:FilePath/Melolontha_melolontha.jpg
nosoro≈æ√≠k kapuc√≠nek,Oryctes nasicornis,https://commons.wikimedia.org/wiki/Special:FilePath/Oryctes_nasicornis.jpg
st≈ôevl√≠k ko≈æit√Ω,Carabus coriaceus,https://commons.wikimedia.org/wiki/Special:FilePath/Carabus_coriaceus.jpg
st≈ôevl√≠k fialov√Ω,Carabus violaceus,https://commons.wikimedia.org/wiki/Special:FilePath/Carabus_violaceus.jpg
hroba≈ô√≠k obecn√Ω,Nicrophorus vespillo,https://commons.wikimedia.org/wiki/Special:FilePath/Nicrophorus_vespillo.jpg
tesa≈ô√≠k obecn√Ω,Cerambyx cerdo,https://commons.wikimedia.org/wiki/Special:FilePath/Cerambyx_cerdo.jpg
potemn√≠k mouƒçn√Ω,Tenebrio molitor,https://commons.wikimedia.org/wiki/Special:FilePath/Tenebrio_molitor.jpg
ko≈æojed obecn√Ω,Dermestes lardarius,https://commons.wikimedia.org/wiki/Special:FilePath/Dermestes_lardarius.jpg
svƒõtlu≈°ka men≈°√≠,Lamprohiza splendidula,https://commons.wikimedia.org/wiki/Special:FilePath/Lamprohiza_splendidula.jpg
lumek velk√Ω,Ichneumon eumerus,https://commons.wikimedia.org/wiki/Special:FilePath/Ichneumon_eumerus.jpg
sr≈°e≈à obecn√°,Vespa crabro,https://commons.wikimedia.org/wiki/Special:FilePath/Vespa_crabro.jpg
p≈ô√°stevn√≠k medvƒõd√≠,Arctia caja,https://commons.wikimedia.org/wiki/Special:FilePath/Arctia_caja.jpg
stu≈ækonoska modr√°,Catocala fraxini,https://commons.wikimedia.org/wiki/Special:FilePath/Catocala_fraxini.jpg
li≈°aj pav√≠ oko,Smerinthus ocellata,https://commons.wikimedia.org/wiki/Special:FilePath/Smerinthus_ocellata.jpg
baboƒçka admir√°l,Vanessa atalanta,https://commons.wikimedia.org/wiki/Special:FilePath/Vanessa_atalanta.jpg
baboƒçka osikov√°,Nymphalis antiopa,https://commons.wikimedia.org/wiki/Special:FilePath/Nymphalis_antiopa.jpg
baboƒçka kop≈ôivov√°,Aglais urticae,https://commons.wikimedia.org/wiki/Special:FilePath/Aglais_urticae.jpg
baboƒçka pav√≠ oko,Aglais io,https://commons.wikimedia.org/wiki/Special:FilePath/Aglais_io.jpg
bƒõl√°sek zeln√Ω,Pieris brassicae,https://commons.wikimedia.org/wiki/Special:FilePath/Pieris_brassicae.jpg
bƒõl√°sek ≈ôe≈ôichov√Ω,Pieris rapae,https://commons.wikimedia.org/wiki/Special:FilePath/Pieris_rapae.jpg
otak√°rek fenyklov√Ω,Papilio machaon,https://commons.wikimedia.org/wiki/Special:FilePath/Papilio_machaon.jpg
batolec duhov√Ω,Apatura iris,https://commons.wikimedia.org/wiki/Special:FilePath/Apatura_iris.jpg
tiplice luƒçn√≠,Tipula paludosa,https://commons.wikimedia.org/wiki/Special:FilePath/Tipula_paludosa.jpg
kom√°r pisklav√Ω,Culex pipiens,https://commons.wikimedia.org/wiki/Special:FilePath/Culex_pipiens.jpg
octomilka obecn√°,Drosophila melanogaster,https://commons.wikimedia.org/wiki/Special:FilePath/Drosophila_melanogaster.jpg
klo≈° jelen√≠,Lipoptena cervi,https://commons.wikimedia.org/wiki/Special:FilePath/Lipoptena_cervi.jpg
moucha dom√°c√≠,Musca domestica,https://commons.wikimedia.org/wiki/Special:FilePath/Musca_domestica.jpg
ov√°d bzuƒçiv√Ω,Tabanus bovinus,https://commons.wikimedia.org/wiki/Special:FilePath/Tabanus_bovinus.jpg
blecha obecn√°,Pulex irritans,https://commons.wikimedia.org/wiki/Special:FilePath/Pulex_irritans.jpg
hvƒõzdice,Asterias rubens,https://commons.wikimedia.org/wiki/Special:FilePath/Asterias_rubens.jpg
hadice,Ophiura ophiura,https://commons.wikimedia.org/wiki/Special:FilePath/Ophiura_ophiura.jpg
je≈æovka,Echinus esculentus,https://commons.wikimedia.org/wiki/Special:FilePath/Echinus_esculentus.jpg
mihule potoƒçn√≠,Lampetra planeri,https://commons.wikimedia.org/wiki/Special:FilePath/Lampetra_planeri.jpg
≈æralok,Carcharodon carcharias,https://commons.wikimedia.org/wiki/Special:FilePath/Carcharodon_carcharias.jpg
rejnok,Raja clavata,https://commons.wikimedia.org/wiki/Special:FilePath/Raja_clavata.jpg
≈°tika obecn√°,Esox lucius,https://commons.wikimedia.org/wiki/Special:FilePath/Esox_lucius.jpg
kapr obecn√Ω,Cyprinus carpio,https://commons.wikimedia.org/wiki/Special:FilePath/Cyprinus_carpio.jpg
√∫ho≈ô ≈ô√≠ƒçn√≠,Anguilla anguilla,https://commons.wikimedia.org/wiki/Special:FilePath/Anguilla_anguilla.jpg
pstruh obecn√Ω,Salmo trutta,https://commons.wikimedia.org/wiki/Special:FilePath/Salmo_trutta.jpg
okoun ≈ô√≠ƒçn√≠,Perca fluviatilis,https://commons.wikimedia.org/wiki/Special:FilePath/Perca_fluviatilis.jpg
losos obecn√Ω,Salmo salar,https://commons.wikimedia.org/wiki/Special:FilePath/Salmo_salar.jpg
jeseter velk√Ω,Acipenser sturio,https://commons.wikimedia.org/wiki/Special:FilePath/Acipenser_sturio.jpg
vranka obecn√°,Cottus gobio,https://commons.wikimedia.org/wiki/Special:FilePath/Cottus_gobio.jpg
ropucha obecn√°,Bufo bufo,https://commons.wikimedia.org/wiki/Special:FilePath/Bufo_bufo.jpg
skokan zelen√Ω,Pelophylax esculentus,https://commons.wikimedia.org/wiki/Special:FilePath/Pelophylax_esculentus.jpg
rosniƒçka zelen√°,Hyla arborea,https://commons.wikimedia.org/wiki/Special:FilePath/Hyla_arborea.jpg
ƒçolek velk√Ω,Triturus cristatus,https://commons.wikimedia.org/wiki/Special:FilePath/Triturus_cristatus.jpg
mlok skvrnit√Ω,Salamandra salamandra,https://commons.wikimedia.org/wiki/Special:FilePath/Salamandra_salamandra.jpg
u≈æovka obojkov√°,Natrix natrix,https://commons.wikimedia.org/wiki/Special:FilePath/Natrix_natrix.jpg
zmije obecn√°,Vipera berus,https://commons.wikimedia.org/wiki/Special:FilePath/Vipera_berus.jpg
slep√Ω≈° k≈ôehk√Ω,Anguis fragilis,https://commons.wikimedia.org/wiki/Special:FilePath/Anguis_fragilis.jpg
je≈°tƒõrka obecn√°,Lacerta agilis,https://commons.wikimedia.org/wiki/Special:FilePath/Lacerta_agilis.jpg
≈æelva bahenn√≠,Emys orbicularis,https://commons.wikimedia.org/wiki/Special:FilePath/Emys_orbicularis.jpg
p≈°tros dvouprst√Ω,Struthio camelus,https://commons.wikimedia.org/wiki/Special:FilePath/Struthio_camelus.jpg
kivi ji≈æn√≠,Apteryx australis,https://commons.wikimedia.org/wiki/Special:FilePath/Apteryx_australis.jpg
tuƒç≈à√°k patagonsk√Ω,Aptenodytes patagonicus,https://commons.wikimedia.org/wiki/Special:FilePath/Aptenodytes_patagonicus.jpg
kachna divok√°,Anas platyrhynchos,https://commons.wikimedia.org/wiki/Special:FilePath/Anas_platyrhynchos.jpg
k√°nƒõ lesn√≠,Buteo buteo,https://commons.wikimedia.org/wiki/Special:FilePath/Buteo_buteo.jpg
po≈°tolka obecn√°,Falco tinnunculus,https://commons.wikimedia.org/wiki/Special:FilePath/Falco_tinnunculus.jpg
koroptev poln√≠,Perdix perdix,https://commons.wikimedia.org/wiki/Special:FilePath/Perdix_perdix.jpg
k≈ôepelka poln√≠,Coturnix coturnix,https://commons.wikimedia.org/wiki/Special:FilePath/Coturnix_coturnix.jpg
racek chechtav√Ω,Chroicocephalus ridibundus,https://commons.wikimedia.org/wiki/Special:FilePath/Chroicocephalus_ridibundus.jpg
hrdliƒçka divok√°,Streptopelia turtur,https://commons.wikimedia.org/wiki/Special:FilePath/Streptopelia_turtur.jpg
s√Ωƒçek obecn√Ω,Athene noctua,https://commons.wikimedia.org/wiki/Special:FilePath/Athene_noctua.jpg
kukaƒçka obecn√°,Cuculus canorus,https://commons.wikimedia.org/wiki/Special:FilePath/Cuculus_canorus.jpg
strakapoud velk√Ω,Dendrocopos major,https://commons.wikimedia.org/wiki/Special:FilePath/Dendrocopos_major.jpg
drozd zpƒõvn√Ω,Turdus philomelos,https://commons.wikimedia.org/wiki/Special:FilePath/Turdus_philomelos.jpg
kos ƒçern√Ω,Turdus merula,https://commons.wikimedia.org/wiki/Special:FilePath/Turdus_merula.jpg
ƒçervenka obecn√°,Erithacus rubecula,https://commons.wikimedia.org/wiki/Special:FilePath/Erithacus_rubecula.jpg
slav√≠k obecn√Ω,Luscinia megarhynchos,https://commons.wikimedia.org/wiki/Special:FilePath/Luscinia_megarhynchos.jpg
s√Ωkora ko≈àadra,Parus major,https://commons.wikimedia.org/wiki/Special:FilePath/Parus_major.jpg
vla≈°tovka obecn√°,Hirundo rustica,https://commons.wikimedia.org/wiki/Special:FilePath/Hirundo_rustica.jpg
brhl√≠k lesn√≠,Sitta europaea,https://commons.wikimedia.org/wiki/Special:FilePath/Sitta_europaea.jpg
stehl√≠k obecn√Ω,Carduelis carduelis,https://commons.wikimedia.org/wiki/Special:FilePath/Carduelis_carduelis.jpg
pƒõnkava obecn√°,Fringilla coelebs,https://commons.wikimedia.org/wiki/Special:FilePath/Fringilla_coelebs.jpg
sk≈ôivan poln√≠,Alauda arvensis,https://commons.wikimedia.org/wiki/Special:FilePath/Alauda_arvensis.jpg
konipas b√≠l√Ω,Motacilla alba,https://commons.wikimedia.org/wiki/Special:FilePath/Motacilla_alba.jpg
≈°paƒçek obecn√Ω,Sturnus vulgaris,https://commons.wikimedia.org/wiki/Special:FilePath/Sturnus_vulgaris.jpg
vr√°na obecn√°,Corvus corone,https://commons.wikimedia.org/wiki/Special:FilePath/Corvus_corone.jpg
havran poln√≠,Corvus frugilegus,https://commons.wikimedia.org/wiki/Special:FilePath/Corvus_frugilegus.jpg
ji≈ôiƒçka obecn√°,Delichon urbicum,https://commons.wikimedia.org/wiki/Special:FilePath/Delichon_urbicum.jpg
straka obecn√°,Pica pica,https://commons.wikimedia.org/wiki/Special:FilePath/Pica_pica.jpg
sojka obecn√°,Garrulus glandarius,https://commons.wikimedia.org/wiki/Special:FilePath/Garrulus_glandarius.jpg
ptakopysk podivn√Ω,Ornithorhynchus anatinus,https://commons.wikimedia.org/wiki/Special:FilePath/Ornithorhynchus_anatinus.jpg
je≈æura australsk√°,Tachyglossus aculeatus,https://commons.wikimedia.org/wiki/Special:FilePath/Tachyglossus_aculeatus.jpg
klokan rud√Ω,Macropus rufus,https://commons.wikimedia.org/wiki/Special:FilePath/Macropus_rufus.jpg
je≈æek z√°padn√≠,Erinaceus europaeus,https://commons.wikimedia.org/wiki/Special:FilePath/Erinaceus_europaeus.jpg
krtek obecn√Ω,Talpa europaea,https://commons.wikimedia.org/wiki/Special:FilePath/Talpa_europaea.jpg
rejsek obecn√Ω,Sorex araneus,https://commons.wikimedia.org/wiki/Special:FilePath/Sorex_araneus.jpg
netop√Ωr velk√Ω,Myotis myotis,https://commons.wikimedia.org/wiki/Special:FilePath/Myotis_myotis.jpg
makak rhesus,Macaca mulatta,https://commons.wikimedia.org/wiki/Special:FilePath/Macaca_mulatta.jpg
pavi√°n pl√°≈°t√≠kov√Ω,Papio hamadryas,https://commons.wikimedia.org/wiki/Special:FilePath/Papio_hamadryas.jpg
≈°impanz uƒçenliv√Ω,Pan troglodytes,https://commons.wikimedia.org/wiki/Special:FilePath/Pan_troglodytes.jpg
gorila obecn√°,Gorilla gorilla,https://commons.wikimedia.org/wiki/Special:FilePath/Gorilla_gorilla.jpg
orangutan,Pongo pygmaeus,https://commons.wikimedia.org/wiki/Special:FilePath/Pongo_pygmaeus.jpg
p√°sovec,Dasypus novemcinctus,https://commons.wikimedia.org/wiki/Special:FilePath/Dasypus_novemcinctus.jpg
mraveneƒçn√≠k velik√Ω,Myrmecophaga tridactyla,https://commons.wikimedia.org/wiki/Special:FilePath/Myrmecophaga_tridactyla.jpg
lenochod,Bradypus tridactylus,https://commons.wikimedia.org/wiki/Special:FilePath/Bradypus_tridactylus.jpg
zaj√≠c poln√≠,Lepus europaeus,https://commons.wikimedia.org/wiki/Special:FilePath/Lepus_europaeus.jpg
kr√°l√≠k divok√Ω,Oryctolagus cuniculus,https://commons.wikimedia.org/wiki/Special:FilePath/Oryctolagus_cuniculus.jpg
sysel obecn√Ω,Spermophilus citellus,https://commons.wikimedia.org/wiki/Special:FilePath/Spermophilus_citellus.jpg
krysa obecn√°,Rattus rattus,https://commons.wikimedia.org/wiki/Special:FilePath/Rattus_rattus.jpg
potkan,Rattus norvegicus,https://commons.wikimedia.org/wiki/Special:FilePath/Rattus_norvegicus.jpg
k≈ôeƒçek poln√≠,Cricetus cricetus,https://commons.wikimedia.org/wiki/Special:FilePath/Cricetus_cricetus.jpg
ondatra pi≈æmov√°,Ondatra zibethicus,https://commons.wikimedia.org/wiki/Special:FilePath/Ondatra_zibethicus.jpg
hrabo≈° poln√≠,Microtus arvalis,https://commons.wikimedia.org/wiki/Special:FilePath/Microtus_arvalis.jpg
nutrie ≈ô√≠ƒçn√≠,Myocastor coypus,https://commons.wikimedia.org/wiki/Special:FilePath/Myocastor_coypus.jpg
rys ostrovid,Lynx lynx,https://commons.wikimedia.org/wiki/Special:FilePath/Lynx_lynx.jpg
hyena,Hyaena hyaena,https://commons.wikimedia.org/wiki/Special:FilePath/Hyaena_hyaena.jpg
vlk,Canis lupus,https://commons.wikimedia.org/wiki/Special:FilePath/Canis_lupus.jpg
li≈°ka,Vulpes vulpes,https://commons.wikimedia.org/wiki/Special:FilePath/Vulpes_vulpes.jpg
kuna lesn√≠,Martes martes,https://commons.wikimedia.org/wiki/Special:FilePath/Martes_martes.jpg
lasice hranostaj,Mustela erminea,https://commons.wikimedia.org/wiki/Special:FilePath/Mustela_erminea.jpg
tcho≈ô tmav√Ω,Mustela putorius,https://commons.wikimedia.org/wiki/Special:FilePath/Mustela_putorius.jpg
vydra ≈ô√≠ƒçn√≠,Lutra lutra,https://commons.wikimedia.org/wiki/Special:FilePath/Lutra_lutra.jpg
jezevec lesn√≠,Meles meles,https://commons.wikimedia.org/wiki/Special:FilePath/Meles_meles.jpg
lachtan,Otaria flavescens,https://commons.wikimedia.org/wiki/Special:FilePath/Otaria_flavescens.jpg
delf√≠n obecn√Ω,Delphinus delphis,https://commons.wikimedia.org/wiki/Special:FilePath/Delphinus_delphis.jpg
plejtv√°k my≈°ok,Balaenoptera physalus,https://commons.wikimedia.org/wiki/Special:FilePath/Balaenoptera_physalus.jpg
slon africk√Ω,Loxodonta africana,https://commons.wikimedia.org/wiki/Special:FilePath/Loxodonta_africana.jpg
slon indick√Ω,Elephas maximus,https://commons.wikimedia.org/wiki/Special:FilePath/Elephas_maximus.jpg
osel dom√°c√≠,Equus asinus,https://commons.wikimedia.org/wiki/Special:FilePath/Equus_asinus.jpg
prase divok√©,Sus scrofa,https://commons.wikimedia.org/wiki/Special:FilePath/Sus_scrofa.jpg
jelen evropsk√Ω,Cervus elaphus,https://commons.wikimedia.org/wiki/Special:FilePath/Cervus_elaphus.jpg
danƒõk skvrnit√Ω,Dama dama,https://commons.wikimedia.org/wiki/Special:FilePath/Dama_dama.jpg
srnec obecn√Ω,Capreolus capreolus,https://commons.wikimedia.org/wiki/Special:FilePath/Capreolus_capreolus.jpg
sob pol√°rn√≠,Rangifer tarandus,https://commons.wikimedia.org/wiki/Special:FilePath/Rangifer_tarandus.jpg
zubr evropsk√Ω,Bison bonasus,https://commons.wikimedia.org/wiki/Special:FilePath/Bison_bonasus.jpg
kudu velk√Ω,Tragelaphus strepsiceros,https://commons.wikimedia.org/wiki/Special:FilePath/Tragelaphus_strepsiceros.jpg
kamz√≠k horsk√Ω,Rupicapra rupicapra,https://commons.wikimedia.org/wiki/Special:FilePath/Rupicapra_rupicapra.jpg
muflon,Ovis musimon,https://commons.wikimedia.org/wiki/Special:FilePath/Ovis_musimon.jpg`;

    // --- Stav ---
    let deck = [], unknown = [], idx = 0, round = 1, rightCnt = 0, wrongCnt = 0;

    // --- DOM prvky ---
    const fileInput = document.getElementById('file');
    const btnReset  = document.getElementById('btnReset');
    const card      = document.getElementById('card');
    const cardInner = document.getElementById('cardInner');
    const pic       = document.getElementById('pic');
    const title     = document.getElementById('title');
    const btnWrong  = document.getElementById('btnWrong');
    const btnRight  = document.getElementById('btnRight');
    const btnAlt    = document.getElementById('btnAlt');
    const btnPrev   = document.getElementById('btnPrev');
    const stats     = document.getElementById('stats');
    const controls  = document.getElementById('controls');

    // --- CSV parsing ---
    function parseCSV(text) {
      return text.split(/\r?\n/)
        .filter(line => line.trim())
        .map(line => {
          const cells = line.split(',');
          return {
            cz:   (cells[0] || '').trim(),
            latin:(cells[1] || '').trim(),
            img:  (cells[2] || '').trim(),
            alt: [],
            altIdx: 0
          };
        });
    }

    // --- LocalStorage ---
    function saveProgress() {
      localStorage.setItem('flashProg', JSON.stringify({deck, unknown, idx, round, rightCnt, wrongCnt}));
    }
    function loadProgress() {
      return JSON.parse(localStorage.getItem('flashProg') || 'null');
    }
    function resetStorage() {
      localStorage.removeItem('flashProg');
    }

    // --- Zam√≠ch√°n√≠ bal√≠ƒçku ---
    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    // --- Statistiky ---
    function updateStats() {
      stats.textContent = `Kolo ${round} | Karta ${idx + 1} z ${deck.length} | ‚úî ${rightCnt} ‚úñ ${wrongCnt}`;
    }

    // --- Zobrazen√≠ karty ---
    function showCard() {
      cardInner.classList.remove('flipped');
      const cur = deck[idx];
      if (cur.alt.length) {
        cur.altIdx = Math.floor(Math.random() * cur.alt.length);
        cur.img = cur.alt[cur.altIdx];
      }
      pic.src = cur.img;
      pic.alt = cur.cz || 'Obr√°zek';
      title.textContent = cur.cz;
      updateStats();
      saveProgress();
    }

    // --- Konec kola / opakov√°n√≠ nezn√°m√Ωch ---
    function finishRound() {
      setTimeout(() => {
        alert(`Konec kola ${round}.\n‚úî = ${rightCnt}   ‚úñ = ${wrongCnt}`);
        if (unknown.length) {
          deck = unknown;
          unknown = [];
          idx = 0;
          round++;
          rightCnt = wrongCnt = 0;
          shuffle(deck);
          showCard();
        } else {
          alert('Hotovo ‚Äì v≈°echno zn√°te!');
          card.style.display = 'none';
          controls.style.display = 'none';
          resetStorage();
        }
      }, 300);
    }

    // --- Dal≈°√≠ karta ---
    function next(correct) {
      if (correct) rightCnt++; else wrongCnt++;
      if (!correct) unknown.push(deck[idx]);
      cardInner.classList.remove('flipped');
      setTimeout(() => {
        idx++;
        if (idx >= deck.length) finishRound();
        else showCard();
      }, 500);
    }

    // --- P≈ôedchoz√≠ karta ---
    function prev() {
      if (idx > 0) {
        idx--;
        cardInner.classList.remove('flipped');
        showCard();
      }
    }

    // --- Wikimedia Commons: alternativn√≠ obr√°zky ---
    async function fetchAlternatives(card) {
      const url = `https://commons.wikimedia.org/w/api.php?action=query&origin=*&format=json` +
                  `&generator=search&gsrnamespace=6&gsrlimit=20&gsrsearch=intitle:${encodeURIComponent(card.latin || card.cz)}` +
                  `&prop=imageinfo&iiprop=url`;
      try {
        const resp = await fetch(url);
        const data = await resp.json();
        if (data.query && data.query.pages) {
          card.alt = Object.values(data.query.pages)
            .map(p => p.imageinfo && p.imageinfo[0].url)
            .filter(Boolean);
        }
      } catch (e) {
        console.error(e);
      }
    }

    async function changeImage() {
      const cur = deck[idx];
      if (!cur.alt.length) {
        await fetchAlternatives(cur);
        if (!cur.alt.length) {
          alert('Nena≈°el jsem dal≈°√≠ obr√°zek');
          return;
        }
      }
      cur.altIdx = Math.floor(Math.random() * cur.alt.length);
      cur.img = cur.alt[cur.altIdx];
      pic.src = cur.img;
      saveProgress();
    }

    // --- Ovl√°d√°n√≠ ---
    cardInner.addEventListener('click', () => cardInner.classList.toggle('flipped'));
    btnWrong.addEventListener('click', () => next(false));
    btnRight.addEventListener('click', () => next(true));
    btnAlt.addEventListener('click', changeImage);
    btnPrev.addEventListener('click', prev);

    fileInput.addEventListener('change', e => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = ev => {
        deck = parseCSV(ev.target.result);
        unknown = [];
        idx = 0;
        round = 1;
        rightCnt = wrongCnt = 0;
        shuffle(deck);
        card.style.display = 'block';
        controls.style.display = 'flex';
        showCard();
      };
      reader.readAsText(file, 'utf-8');
      e.target.value = '';
    });

    btnReset.addEventListener('click', () => {
      if (confirm('Opravdu zaƒç√≠t znovu?')) {
        resetStorage();
        init(true);
      }
    });

    // --- Inicializace ---
    function init(reset = false) {
  if (!reset) {
    const saved = loadProgress();
    if (saved) {
      ({deck, unknown, idx, round, rightCnt, wrongCnt} = saved);
    } else {
      deck = parseCSV(DEFAULT_CSV);
      shuffle(deck);
      unknown = [];
      idx = 0;
      round = 1;
      rightCnt = 0;
      wrongCnt = 0;
    }
  } else {
    deck = parseCSV(DEFAULT_CSV);
    shuffle(deck);
    unknown = [];
    idx = 0;
    round = 1;
    rightCnt = 0;
    wrongCnt = 0;
  }
  if (deck.length) {
    card.style.display = 'block';
    controls.style.display = 'flex';
    showCard();
  }
}
    init();
  </script>
</body>
</html>
